<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Website</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        .dark-mode {
            background-color: #333;
            color: #fff;
        }
        .light-mode {
            background-color: #fff;
            color: #000;
        }
        .toggle-container, .login-container {
            position: fixed;
            right: 10px;
            z-index: 1000;
        }
        .toggle-container {
            bottom: 50px;
        }
        .login-container {
            bottom: 10px;
        }
        .toggle-button, .login-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
        }
        .cookie-consent {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #333;
            color: #fff;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
        }
        .cookie-consent button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
        }
        .cookie-consent a {
            color: #4CAF50;
            text-decoration: none;
            margin-left: 5px;
        }
        .cookie-consent a:hover {
            text-decoration: underline;
        }
        .cookie-consent span {
            flex: 1;
        }
    </style>
</head>
<body class="light-mode">
    <div class="toggle-container" id="toggleContainer">
        <button class="toggle-button" onclick="toggleMode()">Toggle Light/Dark Mode</button>
    </div>

    <div class="login-container">
        <button class="login-button" onclick="loginWithDiscord()">Login with Discord</button>
    </div>

    <div class="cookie-consent" id="cookieConsent">
        <span>We use cookies to enhance your experience. By continuing to visit this site, you agree to our use of cookies. We only log your Discord login and remember your dark mode preference. By accepting, you agree to our <a href="/PrivacyPolicy">Privacy Policy</a>, <a href="/Terms">Terms of Service</a>, and the use of cookies.</span>
        <button onclick="acceptCookies()">Accept</button>
    </div>

    <script>
        // Function to set a cookie
        function setCookie(name, value, days) {
            const d = new Date();
            d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + d.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/";
        }

        // Function to get a cookie
        function getCookie(name) {
            const cname = name + "=";
            const decodedCookie = decodeURIComponent(document.cookie);
            const ca = decodedCookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(cname) === 0) {
                    return c.substring(cname.length, c.length);
                }
            }
            return "";
        }

        // Function to accept cookies
        function acceptCookies() {
            setCookie("acceptedCookies", "true", 365);
            document.getElementById('cookieConsent').style.display = 'none';
        }

        // Check if the user has already accepted cookies
        window.onload = function() {
            if (getCookie("acceptedCookies") !== "") {
                document.getElementById('cookieConsent').style.display = 'none';
            }
            // Set the mode based on the cookie
            if (getCookie("darkMode") === "true") {
                document.body.classList.add("dark-mode");
                document.body.classList.remove("light-mode");
            } else {
                document.body.classList.add("light-mode");
                document.body.classList.remove("dark-mode");
            }
            // Adjust the position of the toggle button based on device type
            adjustTogglePosition();
        }

        // Function to toggle light/dark mode
        function toggleMode() {
            if (getCookie("acceptedCookies") === "") {
                alert("Please accept cookies, Terms of Service, and Privacy Policy to use this feature.");
                return;
            }
            if (document.body.classList.contains("light-mode")) {
                document.body.classList.add("dark-mode");
                document.body.classList.remove("light-mode");
                setCookie("darkMode", "true", 365);
            } else {
                document.body.classList.add("light-mode");
                document.body.classList.remove("dark-mode");
                setCookie("darkMode", "false", 365);
            }
        }

        // Function to adjust the position of the toggle button
        function adjustTogglePosition() {
            var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            var toggleContainer = document.getElementById("toggleContainer");
            if (isMobile) {
                toggleContainer.style.top = "10px";
                toggleContainer.style.bottom = "";
            } else {
                toggleContainer.style.top = "";
                toggleContainer.style.bottom = "50px";
            }
        }

        // Function to initiate login with Discord
        function loginWithDiscord() {
            const clientId = '1246411584658473012';
            const redirectUri = encodeURIComponent('http://localhost:3000/auth/callback'); // Update this if using a different URI
            const scope = 'identify guilds';
            window.location.href = `https://discord.com/oauth2/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=code&scope=${scope}`;
        }
    </script>
</body>
</html>
